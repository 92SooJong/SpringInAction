<!DOCTYPE html>
<html>
<body>

<h1>The onclick Event</h1>
<p>The onclick event is used to trigger a function when an element is clicked on.</p>
<input id="input_fileName" type="text" />
<button onclick="myFunction()">파일 불러오기</button>
<div id="output">...</div>

<table id="table" border="1" >
</table>


<input id="input_tableName" type="text" />
<button onclick="createInsertSentence()">INSERT문 생성</button>




<script>

    // 파일 불러오기
    function myFunction() {
        var input = document.createElement("input");
        input.type = "file";
        input.accept = ".csv"; 
        input.onchange = function (event) {
            processFile(event.target.files[0]);
        };
        input.click();
    }

    // 파일값 가져오기
    function processFile(file) {
        
        var reader = new FileReader();
        reader.onload = function () {
            var fileNameCmp = document.getElementById("input_fileName");       
            fileNameCmp.value = file.name;
            fileNameCmp.readOnly = true;
            drawTable(reader.result);
        };
        reader.readAsText(file, /* optional */ "euc-kr");
    }

    // 파일값 입력으로 받아서 table에 그리기
    function drawTable(result){
        var table = document.getElementById('table'); 
        
        rows = result.split('\n');
        drawTableHeader(rows[0].split('\t'))
        for(var i=1; i<rows.length-1; i++){
            drawTableRow(rows[i].split('\t'),i);
        }

    }

    // td 그리기
    function drawTableRow(tdList,rownum){
        var td = ''
        td += `<tr>`
        for(var i=0; i<tdList.length; i++){
            td += `<td id=td_`+rownum+`_`+i+`>${tdList[i]}</td>`;
        }
        td += `</tr>`
        table.innerHTML += td;

    }

    // th 그리기
    function drawTableHeader(headList){
        var head = ''
        
        for(var i=0; i<headList.length; i++){
            head += `<th id=th_0_`+i.toString()+`>${headList[i]}</th>`;
        }
        table.innerHTML += head;
    }

    function createInsertSentence(){
        var tableNameObj = document.getElementById("input_tableName");       
        if(tableNameObj.value == "") {
            alert("테이블 명이 입력되지 않았습니다.")
            return;
        }
        var tableName = tableNameObj.value;
        var prefix = "INSERT INTO "


    }






</script>

</body>
</html>
